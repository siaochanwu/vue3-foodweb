(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c0a1087"],{"11e9":function(t,e,s){var a=s("52a7"),r=s("4630"),o=s("6821"),n=s("6a99"),i=s("69a8"),c=s("c69a"),l=Object.getOwnPropertyDescriptor;e.f=s("9e1e")?l:function(t,e){if(t=o(t),e=n(e,!0),c)try{return l(t,e)}catch(s){}if(i(t,e))return r(!a.f.call(t,e),t[e])}},"8e6e":function(t,e,s){var a=s("5ca1"),r=s("990b"),o=s("6821"),n=s("11e9"),i=s("f1ae");a(a.S,"Object",{getOwnPropertyDescriptors:function(t){var e,s,a=o(t),c=n.f,l=r(a),d={},u=0;while(l.length>u)s=c(a,e=l[u++]),void 0!==s&&i(d,e,s);return d}})},9093:function(t,e,s){var a=s("ce10"),r=s("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return a(t,r)}},"990b":function(t,e,s){var a=s("9093"),r=s("2621"),o=s("cb7c"),n=s("7726").Reflect;t.exports=n&&n.ownKeys||function(t){var e=a.f(o(t)),s=r.f;return s?e.concat(s(t)):e}},ade3:function(t,e,s){"use strict";function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}s.d(e,"a",(function(){return a}))},eb70:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"CustomerOrder container mt-5"},[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}},[s("div",{staticClass:"load-wrapp"},[s("div",{staticClass:"load-3"},[s("div",{staticClass:"line"}),s("div",{staticClass:"line"}),s("div",{staticClass:"line"})])])]),t._m(0),s("div",{directives:[{name:"show",rawName:"v-show",value:t.cart.total>0,expression:"cart.total > 0"}],staticClass:"my-5 row justify-content-center"},[s("div",{staticClass:"col-lg-6"},[s("span",{staticClass:"title fw-bold fs-3 border border-top-0 border-start-0 border-end-0 border-success border-5"},[t._v("購物車")]),s("table",{staticClass:"table mt-4"},[t._m(1),s("tbody",t._l(t.cart.carts,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"align-middle"},[t._v("\n                "+t._s(e.product.title)+"\n                "),e.coupon?s("div",{staticClass:"text-success"},[t._v("\n                  已套用優惠券\n                ")]):t._e()]),s("td",{staticClass:"align-middle"},[t._v("\n                "+t._s(e.qty)+"/"+t._s(e.product.unit)+"\n              ")]),s("td",{staticClass:"align-middle text-right"},[t._v("$"+t._s(e.final_total))]),s("td",{staticClass:"align-middle"},[s("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(s){return t.removeItem(e.id)}}},[s("i",{staticClass:"far fa-trash-alt"})])])])})),0),s("tfoot",[s("tr",[s("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),s("td",{staticClass:"text-right"},[t._v("$"+t._s(t.cart.total))])]),t.cart.final_total!==t.cart.total?s("tr",[s("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("折扣價")]),s("td",{staticClass:"text-right text-success"},[t._v("$"+t._s(t.cart.final_total))])]):t._e()])]),s("div",{staticClass:"input-group mb-3 input-group-sm"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{input:function(e){e.target.composing||(t.coupon_code=e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:t.addCouponCode}},[t._v("\n              套用優惠碼\n            ")])])])]),s("div",{staticClass:"col-lg-6"},[s("span",{staticClass:"title fw-bold fs-3 border border-top-0 border-start-0 border-end-0 border-success border-5"},[t._v("個人資料")]),s("ValidationObserver",{ref:"form"},[s("form",{staticClass:"mt-3",on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[s("ValidationProvider",{staticClass:"form-group",attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,r=e.classes;return[s("label",{staticClass:"fs-5 fw-bold",attrs:{for:"useremail"}},[t._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",class:r,attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),s("span",{staticClass:"text-danger"},[t._v("\n              "+t._s(a[0])+"\n            ")])]}}])}),s("br"),s("ValidationProvider",{staticClass:"form-group",attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[s("label",{staticClass:"fs-5 fw-bold",attrs:{for:"username"}},[t._v("收件人姓名")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"form-control",attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),s("span",{staticClass:"text-danger"},[t._v(t._s(a[0]))])]}}])}),s("br"),s("ValidationProvider",{staticClass:"form-group",attrs:{rules:"numeric|min:7"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[s("label",{staticClass:"fs-5 fw-bold",attrs:{for:"usertel"}},[t._v("收件人電話")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",attrs:{type:"tel",id:"usertel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),s("span",{staticClass:"text-danger"},[t._v(t._s(a[0]))])]}}])}),s("br"),s("ValidationProvider",{staticClass:"form-group",attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[s("label",{staticClass:"fs-5 fw-bold",attrs:{for:"useraddress"}},[t._v("收件人地址")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control",attrs:{type:"address",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),s("span",{staticClass:"text-danger"},[t._v(" "+t._s(a[0])+" ")])]}}])}),s("br"),s("div",{staticClass:"form-group"},[s("label",{staticClass:"fs-5 fw-bold",attrs:{for:"useraddress"}},[t._v("備註")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"",cols:"30",rows:"3"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),s("div",{staticClass:"text-right mt-2"},[s("button",{staticClass:"btn btn-danger"},[t._v("送出訂單")])])],1)])],1)])],1)},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"position-relative m-4"},[s("div",{staticClass:"progress px-5",staticStyle:{height:"2px"}},[s("div",{staticClass:"progress-bar bg-success",staticStyle:{width:"50%"},attrs:{role:"progressbar","aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"}})]),s("button",{staticClass:"position-absolute top-0 start-0 translate-middle btn btn-sm btn-success rounded-pill ms-2",staticStyle:{height:"2rem"},attrs:{type:"button"}},[t._v("加入購物車")]),s("button",{staticClass:"position-absolute top-0 start-50 translate-middle btn btn-sm btn-success rounded-pill",staticStyle:{height:"2rem"},attrs:{type:"button"}},[t._v("填寫基本資料")]),s("button",{staticClass:"position-absolute top-0 start-100 translate-middle btn btn-sm btn-secondary rounded-pill me-2",staticStyle:{width:"5rem",height:"2rem"},attrs:{type:"button"}},[t._v("確認訂單")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("th",{staticClass:"ps-2 fs-5"},[t._v("商品名稱")]),s("th",{staticClass:"ps-2 fs-5"},[t._v("數量")]),s("th",{staticClass:"ps-2 fs-5"},[t._v("單價")]),s("th")])}],o=(s("8e6e"),s("ac6a"),s("456d"),s("ade3")),n=s("2f62");function i(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function c(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?i(Object(s),!0).forEach((function(e){Object(o["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var l={data:function(){return{products:[],product:{},status:{loadingItem:""},cart:{},coupon_code:"",form:{user:{name:"",email:"",tel:"",address:""},message:""},category:""}},methods:{addCouponCode:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("wendywu007","/coupon"),s={code:this.coupon_code};this.$store.dispatch("loading",!0),this.$http.post(e,{data:s}).then((function(e){console.log(e),t.getCart(),t.$store.dispatch("loading",!1)}))},createOrder:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("wendywu007","/order"),s=this.form;this.$store.dispatch("loading",!0),this.$refs.form.validate().then((function(a){a?t.$http.post(e,{data:s}).then((function(e){console.log("訂單已建立",e);var s=e.data.orderId;t.$store.dispatch("order",s),t.$store.dispatch("msg",{msg:"您的訂單已送出",Boolean:!0}),e.data.success&&(console.log(e.data.orderId),t.$router.push("/orderDone")),t.$store.dispatch("loading",!1)})):(t.$store.dispatch("msg",{msg:"訂單欄位不完整",Boolean:!0}),console.log("欄位不完整"))}))},getCart:function(){var t=this;this.$store.dispatch("loading",!0);var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("wendywu007","/cart");this.$http.get(e).then((function(e){console.log(e),t.cart=e.data.data,t.$store.dispatch("loading",!1)}))},addtoCart:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("wendywu007","/cart");this.status.loadingItem=t;var r={product_id:t,qty:s};this.$http.post(a,{data:r}).then((function(t){console.log(t),e.status.loadingItem="",e.getCart()}))}},created:function(){this.getCart()},computed:c({},Object(n["b"])(["isLoading"]))},d=l,u=s("2877"),p=Object(u["a"])(d,a,r,!1,null,null,null);e["default"]=p.exports},f1ae:function(t,e,s){"use strict";var a=s("86cc"),r=s("4630");t.exports=function(t,e,s){e in t?a.f(t,e,r(0,s)):t[e]=s}}}]);
//# sourceMappingURL=chunk-2c0a1087.6a3c53e0.js.map